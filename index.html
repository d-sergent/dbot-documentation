<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portail Documentation D-Bot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
    <style>
        body { box-sizing: border-box; min-width: 200px; max-width: 1200px; margin: 0 auto; padding: 45px; display: flex; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif; }
        #sidebar { width: 280px; padding-right: 20px; border-right: 1px solid #e1e4e8; height: calc(100vh - 90px); overflow-y: auto; position: sticky; top: 45px; flex-shrink: 0; }
        #content { flex: 1; padding-left: 40px; min-width: 0; }
        .markdown-body { max-width: 100%; overflow-x: auto; }
        .nav-item { display: block; padding: 8px 12px; text-decoration: none; color: #0366d6; border-radius: 6px; cursor: pointer; font-size: 14px; margin-bottom: 2px; }
        .nav-item:hover { background-color: #f6f8fa; }
        .nav-item.active { background-color: #0366d6; color: white; font-weight: bold; }
        .nav-group { font-weight: bold; margin-top: 20px; margin-bottom: 8px; padding-left: 12px; color: #24292e; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; border-left: 3px solid #0366d6; }
        .nav-group:first-child { margin-top: 0; }
        @media (max-width: 767px) { body { flex-direction: column; padding: 15px; } #sidebar { width: 100%; border-right: none; border-bottom: 1px solid #e1e4e8; height: auto; position: relative; top: 0; margin-bottom: 20px; } #content { padding-left: 0; } }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2 style="font-size: 1.3em; margin-bottom: 20px; color: #24292e;">�� D-Bot Documentation</h2>
        <div id="nav-list"></div>
    </div>
    <div id="content" class="markdown-body">
        <div id="view"></div>
    </div>

    <script>
        const docs = {"Fondations: 00_Index": "# Documentation Projet Robot D-Bot (Évolution 2026)\n\nBienvenue dans la documentation technique du projet de robot humanoïde basé sur le D-Bot open-source, adapté et amélioré pour une impression sur Qidi Plus 4.\n\n## Table des Matières\n\n1.  **[Synthèse du Projet](./01_Synthese_Projet.md)**\n    *   Vision globale et stratégie de développement (Phases).\n    *   Architecture matérielle (Jetson + Spresense + OAK-D).\n    *   Points de vigilance critique (Audit 2026).\n\n2.  **[Liste des Achats (BOM Consolidée)](./02_Liste_Achats.md)**\n    *   Visserie (ISO 7380, DIN 912, Inserts Ruthex).\n    *   Motorisation (RS-00 à RS-05) et PDB Matek.\n    *   Électronique de contrôle et Audio.\n\n3.  **[Guide Mécanique](./03_Montage_Mecanique.md)**\n    *   Paramètres CAO (Chambrages, Tolérances).\n    *   Montage des Roulements 608ZZ.\n    *   Préparation Commande CNC.\n\n4.  **[Électronique & Câblage](./04_Electronique_Cablage.md)**\n    *   Bus CAN (Daisy Chain, GND critique, Stubs).\n    *   Alimentation & Protection (XT60, Matek PDB).\n    *   Sécurité Wanptek (Mode OCP).\n\n5.  **[Installation et Logiciel](./05_Logiciel_Configuration.md)**\n    *   JetPack 6, ROS 2 Humble et micro-ROS.\n    *   Liaison série Jetson/Spresense (UART Pins 8/10).\n    *   Configuration SocketCAN (1 Mbps).\n\n6.  **[Décisions Architecturales](./06_Decisions_Architecturales.md)**\n    *   Choix du Kit Moteur (RS-05).\n    *   Carte d'Extension Sony Spresense.\n    *   Positionnement LiDAR et Matériaux.\n\n7.  **[Vision et IA](./07_Vision_IA.md)**\n    *   OAK-D Pro S2 FF (Encastrement, Tilt, Stéréo Active).\n    *   LiDAR Unitree L2 et Fusion de capteurs Isaac ROS.\n\n8.  **[Audio et Perception](./08_Audio_Perception.md)**\n    *   Spatialisation 8 micros (PDM), Beamforming et TPU isolation.\n    *   Stratégie Double IMU (Stabilisation Regard).\n\n9.  **[Guide Avancé Impression 3D](./09_Guide_Avance_Impression.md)**\n    *   Gestion humidité PA12-CF et Slicer Orca.\n    *   Recuit \"In-Situ\" (PLA+, PETG-CF, PA12-CF) et Macros G-Code.\n\n10. **[Installation Buse Tungstène](./10_Guide_Buse_Tungstene.md)**\n    *   Maintenance buse et sécurité électrique générale (Wanptek).\n    *   Sauvegarde et maintenance préventive.\n\n11. **[Guide SensiEDGE & Sécurité](./11_Guide_SensiEDGE_Watchdog.md)**\n    *   Architecture \"Power Manager\" (Veille/Réveil).\n    *   Code C++ Watchdog et Surveillance Batterie 12S.\n    *   Intégration capteurs environnementaux (CommonSense).\n\n12. **[Guide Pièces Métal (CNC)](./12_Guide_Parties_Metal_CNC.md)**\n    *   Spécifications Alu 6061-T6 et règles de conception.\n    *   Préparation fichiers STEP et astuces commande.\n\n13. **[Sécurité Électrique Essentielle](./13_Securite_Electrique.md)**\n    *   Paramètres alimentation labo (Safe Start).\n    *   Séquence d'allumage/extinction stricte.\n    *   Arrêt d'urgence et sécurité mécanique.\n\n14. **[Cinématique & Choix Moteurs](./14_Cinematique_Moteurs.md)**\n    *   Architecture 24 DOF (Tête + Bras + Jambes).\n    *   Tableau comparatif RobStride (RS-00 à RS-05).\n    *   Couple, Poids, Prix et Applications.\n\n---\n*Documentation exhaustive générée et auditée en Février 2026.*\n", "Fondations: 01_Synthese": "# Synthèse du Projet D-Bot (Évolution)\n\n## 1. Vision et Objectifs\nLe projet consiste à construire un robot humanoïde baptisé **D-Bot**.\nIl s'agit d'une **évolution majeure** de la plateforme open-source **K-Bot**, améliorée avec des actionneurs modernes et une intelligence embarquée avancée. Ce n'est pas un simple fork, mais une refonte complète de l'architecture électronique et motrice.\n\n### Améliorations Clés (vs K-Bot Original)\nLe D-Bot repose sur un système de **22 moteurs RobStride** (20 DOF standard + 2x RS-05 additionnels), une vision IA **Luxonis OAK-D Pro** et un **LiDAR Unitree L2**, le tout piloté par une **NVIDIA Jetson Orin Nano** et une **Sony Spresense**.\n\n## 2. Feuille de Route (Roadmap)\nLe projet est découpé en 4 phases distinctes pour valider chaque étape critique.\n\n### Phase 1 : Tête et Torse (En Cours)\n*   **Objectif** : Valider l'intelligence perception/audio.\n*   **Matériel** : Jetson Orin Nano, OAK-D Pro, Spresense.\n*   **Moteurs** : Aucun (0).\n\n### Phase 2 : Premier Bras (Focus Actuel)\n*   **Objectif** : Validation mécanique et manipulation.\n*   **Matériel** : + 6 Moteurs Robstride (RS-03 épaule, RS-02 coude, RS-00 poignet).\n*   **Budget Est.** : ~2 000 €.\n\n### Phase 3 : Deuxième Bras\n*   **Objectif** : Coordination bimanuelle.\n\n### Phase 4 : Marche (Jambes)\n*   **Objectif** : Locomotion et équilibre dynamique.\n*   **Matériel** : + 10-12 Moteurs puissants (RS-04).\n\n## 3. Architecture Matérielle\nL'architecture repose sur une séparation claire entre la puissance de calcul (IA) et le contrôle temps réel (Moteurs/Capteurs bas niveau).\n\n```mermaid\ngraph TD\n    A[NVIDIA Jetson Orin Nano] -- \"USB3 (High Speed)\" --> B[Sony Spresense]\n    A -- USB/CAN --> C[\"InnoMaker USB2CAN-C\"]\n    C -- \"Bus CAN (1 Mbps)\" --> D[Moteurs Robstride]\n    A -- USB3 --> E[\"OAK-D Pro (Vision AI)\"]\n    A -- USB --> F[LiDAR Unitree L2]\n\n    subgraph \"Contrôle Moteur\"\n    D --> D1[\"RS-01..04 (Membres)\"]\n    D --> D2[\"RS-05 (Cou/Poignets)\"]\n    end\n\n    subgraph \"Perception Audio/Sensor\"\n    B --> B1[\"Micros (Beamforming)\"]\n    B --> B2[Capteurs I2C/SPI]\n    end\n```\n\n## 3. Plateforme de Fabrication (Qidi Plus 4)\nLa Qidi Plus 4 a été choisie pour sa capacité à imprimer des matériaux techniques à haute température.\n\n- **Matériau Recommandé** : PETG-CF (Facile à imprimer, rigide, esthétique carbone).\n- **Paramètres Critiques** :\n  - **Chambrages (Counterbore)** : Indispensables pour noyer les têtes de vis.\n  - **Tolérances** : Marge de 0.5mm sur les diamètres de perçage vis.\n  - **Remplissage** : 100% pour les pièces de force (hanches, épaules), 40% gyroid pour les coques esthétiques.\n  - **Connectivité & Réseau** : TP-Link Archer T3U (AC1300 Mbps, USB 3.0, MU-MIMO). Indispensable pour stabiliser la connexion Klipper sur 5GHz.\n- **Détails Complets** : Voir le **[Guide Avancé Impression 3D](./09_Guide_Avance_Impression.md)**.\n\n## Stratégie de Développement (Phases)\nLa construction est divisée en 4 phases pour valider les systèmes progressivement :\n1.  **Phase 1 (Tête & Torse)** : Validation de l'intelligence (Jetson/Spresense), de la vision et de l'audio.\n2.  **Phase 2 (Premier Bras)** : Validation 6 DOF, Bus CAN et impression structurelle.\n3.  **Phase 3 (Deuxième Bras)** : Coordination bimanuelle et transport de charges.\n4.  **Phase 4 (Corps & Marche)** : Jambes, équilibre dynamique et autonomie.\n\n## Points de Vigilance Critique (Audit Discussion)\n-   **Motorisation** : Le couple de pointe (Peak Torque) des RS-04 (hanches/genoux) atteint 120 Nm. La structure doit être en PA12-CF ou Aluminium 6061.\n-   **Sécurité Électrique** : Toujours utiliser le mode **OCP** (Overcurrent Protection) sur l'alimentation Wanptek (limite à 1A pour les premiers tests).\n-   **Communication** : Le bus CAN 1 Mbps exige des paires torsadées et une masse commune (GND) entre la Jetson et les moteurs.\n-   **Maintenance** : Utiliser des connecteurs **WAGO 221** dans le cou pour faciliter le démontage rapide de la tête.\n\n---\n**Note** : Ce projet est une évolution active. Les choix techniques documentés ici reflètent l'état des lieux en Février 2026.\n", "Fondations: 02_Liste_Achats": "# Liste des Achats (BOM Consolidée)\n\n## 1. Visserie & Fixations (Hardware)\n**Stratégie** : Utilisation de vis **DIN 912 (Tête Cylindrique)** en Acier Inoxydable A2 (Inox 304) pour la résistance à la corrosion, ou Acier Noir 12.9 pour les axes moteurs de force.\n\n### Quantités Requises (D-Bot + 2x RS-05)\n| Type | Diamètre | Longueur | Quantité Est. | Usage |\n| :--- | :--- | :--- | :--- | :--- |\n| **Vis CHC** | M3 | 6mm - 12mm | ~240 | Fixations électroniques, caches, small motors |\n| **Vis CHC** | M4 | 10mm - 15mm | ~160 | Structure principale, moteurs RS-01-RS-04 |\n| **Vis CHC** | M5 | 12mm - 20mm | ~40 | Hanches, Grosses articulations |\n| **Écrous/Rondelles** | M3/M4/M5 | - | ~150 de chaque | - |\n\n### Liens d'Achat Recommandés\n*   **Protorx (France)** : [Lien vers Boîtes M3/M4 Inox](https://www.protorx.com) - *Idéal pour un stock propre*.\n*   **Vis-Express** : [Lien vers M4 DIN 912 Inox A2](https://www.vis-express.fr) - *Livraison rapide*.\n*   **ScrewsAndMore** : [Lien vers Assortiment 400pcs](https://www.screwsandmore.de) - *Rapport quantité/prix*.\n\n> **Conseil** : Achetez un kit \"Build Complet\" (1225pcs M2-M5) pour avoir du stock, et complétez avec des sachets de 50 vis M4 Acier 12.9 pour les moteurs.\n\n### Inserts Filetés (Heat-set)\n*   **Marque Recommandée** : **Ruthex** (ou CNC Kitchen).\n*   **Modèle** : RX-M3x5.7 (M3) et versions \"Longues\" pour M4.\n*   **Pourquoi ?** Les moletages opposés offrent la meilleure résistance à l'arrachement dans le PETG-CF.\n*   **Acheter chez** : [3DJake France](https://www.3djake.fr) ou Amazon.\n\n---\n\n## 2. Moteurs & Actionneurs (Par Phase)\n\n### Phase 1 : Tête / Torse (Aucun Moteur)\n*   Focus uniquement sur les capteurs et l'intelligence.\n\n### Phase 2 : Premier Bras (6 DOF)\n| Modèle | Quantité | Couple (Peak) | Usage |\n| :--- | :--- | :--- | :--- |\n| **Robstride 03** | 2 | 35 Nm | Épaule (Force brute - Pitch/Roll) |\n| **Robstride 02** | 3 | 24.8 Nm | Biceps / Coude / Avant-bras |\n| **Robstride 00** | 1 | - | Poignet / Effecteur Final (Rotation) |\n\n*(Note: Le RS-05 initialement prévu pour le cou est reporté ou intégré différemment selon le design final de la tête)*.\n\n### Autres Composants Électroniques\n| Composant | Modèle | Quantité | Note |\n| :--- | :--- | :--- | :--- |\n| **Robstride 04** | - | Hanches / Torse Pivot (Marche) | - |\n| Distribution (PDB) | **Matek PDB-HEX** (Master) + **PDB-XT60-W** (Satellites) | 2 + 4 | Hubs de puissance pro |\n| Connectique Data | **JST-GH 4-pin** (Silicone / Holybro) | 30m | Fils torsadés blindés |\n| Maintenance Tête | **WAGO 221-413 / 415** | 10 | Connecteurs rapides sans soudure |\n| Alimentation Labo | **Wanptek DPS605U** (60V/5A) | 1 | Réglage précis 24V/48V + OCP |\n| Interface CAN | **InnoMaker USB2CAN-C** | 1 | Natif Linux (SocketCAN) |\n\n> **Note** : Vérifiez bien que les moteurs arrivent avec leurs câbles d'alimentation (XT60) et data (JST-GH). Sinon, commander séparément.\n\n---\n\n## 3. Électronique & Cerveau (Détail Phase 1 & 2)\n\n| Composant | Modèle | Note |\n| :--- | :--- | :--- |\n| **Cerveau IA** | NVIDIA Jetson Orin Nano (8GB) | Le modèle Super est un plus, mais le 8GB suffit. |\n| **Vision (Tête)** | Luxonis OAK-D Pro | Version Fixed-Focus (FF) recommandée (vibrations). |\n### Électronique de Contrôle\n- **Sony Spresense** :\n    - *Main Board* + *Extension Board* (Standard).\n    - **Note sémantique** : L'Extension Board Standard est préférée pour ses 8 entrées micro (vs 4 sur la version LTE).\n    - **Connectivité** : Pour la LTE, utilisez un shield tiers (Waveshare SIM7600) via UART pour conserver les 8 micros.\n- **SensiEDGE CommonSense** : Carte d'extension \"Tout-en-un\" (IMU de secours + Qualité Air + Température interne).\n- **Audio** : 8x Microphones numériques MEMS (PDM) + câbles blindés.\n\n### Sécurité & Gestion d'Énergie (Power Management)\n| Composant | Référence | Rôle |\n| :--- | :--- | :--- |\n| **Régulateur Veille** | **Mean Well DDR-15G-5** (ou Buck 60V->5V) | Alimente la Spresense en permanence (Always-On). |\n| **Switch Puissance** | **Infineon BTS50085-1TMA** (ou MOSFET Opto) | Coupe le 44V (Jetson/Moteurs) sur ordre de la Spresense. |\n| **Pont Diviseur** | Résistances 150kΩ + 10kΩ | Surveillance de la tension batterie 12S. |\n| **Condensa.** | 1000µF / 63V (Low ESR) | Filtrage des pics de tension au branchement. |\n| **Connecteur** | **XT90-S** (Anti-Spark) | Obligatoire pour la batterie 12S (évite l'arc électrique). |\n| **LiDAR** | **Unitree L2** | FOV 360°x90°, Portée 30m, IMU intégrée. |\n| **Alimentation Labo** | **Wanptek DPS605U** | Indispensable Phase 2 (Régler sur 24V / Lim. 1A). |\n\n### Interface CAN & Câbles\n*   **Adaptateur USB-CAN** : **InnoMaker USB2CAN-C**\n    *   *Critique* : Basé sur firmware `gs_usb` (compatible Linux natif).\n*   **Connecteurs Data** : **JST-GH 1.25mm** (Marque Holybro recommandée pour la qualité).\n    *   Acheter des câbles \"tout faits\" si possible pour éviter de sertir du 1.25mm.\n*   **Connecteurs Puissance** : **XT60** (Jaune).\n*   **Câble Bus CAN** : Utiliser impérativement des **paires torsadées** pour CAN_H / CAN_L.\n\n---\n\n## 4. Infrastructure & Connexion\n| Composant | Modèle | Usage |\n| :--- | :--- | :--- |\n| **WiFi Imprimante** | **TP-Link Archer T3U** | AC1300 Mbps, USB 3.0. Connectivité stable pour Qidi Plus 4. |\n\n---\n\n## 5. Consommables & Outils\n*   **Frein Filet** : **Loctite 222** (Faible/Moyen). Indispensable ! Les vibrations des moteurs Robstride desserrent les vis M3 en quelques heures sans cela.\n*   **Clés Allen** : Jeu de clés de précision (Facom ou Wera) pour ne pas foire les têtes de vis.\n", "Conception: 03_Montage_Mecanique": "# Guide Mécanique et Impression 3D\n\n## 1. Paramètres### Visserie Industrielle\nLe projet utilise deux standards principaux :\n1.  **ISO 7380 (Tête Bombée)** : Profil bas, idéal pour l'esthétique et éviter d'accrocher les câbles.\n2.  **DIN 912 (Tête Cylindrique)** : Indispensable pour les zones à fort couple (hanches). Permet un serrage monumental.\n\n#### Paramètres de Chambrage (Fusion 360 - Vis DIN 912)\n| Dimension | Symbole | M3 (DIN 912) | M4 (DIN 912) |\n| :--- | :--- | :--- | :--- |\n| Diamètre Chambrage | Dcb | **6.5 mm** | **8.5 mm** |\n| Profondeur Chambrage | Hcb | **3.5 mm** | **4.5 mm** |\n| Trou Insert (PETG-CF) | dh | 4.2 - 4.5 mm | 5.6 - 5.8 mm |\n| Épaisseur Plancher | T | 3.0 mm min | 4.0 mm min |\n\n---\n\n### Inserts et Roulements\n- **Inserts Ruthex** : Utilisez les versions **Longues (8.1mm)** pour les RS-04. Les versions courtes (5.7mm) suffisent pour les carters.\n- **Roulements 608ZZ** :\n    - Montage : Bague extérieure fixe dans le support, intérieure tournante avec l'axe.\n    - Logement : **22.0 mm** pour press-fit (ajusté au fer).\n    - Butée : Épaulement de **1 mm** (ne doit toucher que la bague extérieure).\n\n### Commande CNC (Aluminium 6061)\n- **Format** : Fichiers `.step` uniquement.\n- **Rayons** : Rayons internes de **2mm minimum** (usinage fraise).\n- **Finition** : \"As Machined\" (le plus économique).\n\n### Chambrages (Counterbore) pour têtes de vis DIN 912\nL'objectif est de noyer la tête de vis pour qu'elle ne dépasse pas, tout en laissant passer la clé Allen.\n| Paramètre | Symbole | M3 | M4 |\n| :--- | :--- | :--- | :--- |\n| **Diamètre Chambrage** | $D_{cb}$ | **6.5 mm** | **8.5 mm** |\n| **Profondeur** | $H_{cb}$ | **3.5 mm** | **4.5 mm** |\n| **Passage de vis** | $d$ | 3.4 mm | 4.5 mm |\n\n> **Astuce Fusion 360** : Utilisez l'outil *Hole (H)* > *Counterbore* > *Simple* > *Flat*.\n\n### Trous pour Inserts (Heat-set)\nCes diamètres sont optimisés pour les inserts Ruthex standards.\n| Paramètre | M3 | M4 |\n| :--- | :--- | :--- | \n| **Diamètre perçage** | **4.2 - 4.5 mm** | **5.6 - 5.8 mm** |\n| **Épaisseur paroi min** | 1.6 mm | 2.0 mm |\n| **Épaisseur fond plan** | **3.0 mm** (Min) | **4.0 mm** (Min) |\n\n---\n\n## 2. Impression 3D (Qidi Plus 4)\n\n### Matériau Recommandé : PETG-CF\nLe PETG renforcé fibre de carbone (PETG-CF) est le meilleur compromis pour le D-Bot sur cette machine.\n*   **Avantages** : Rigidité accrue (moins de flexion que le PETG pur), aspect mat qui cache les couches, bonne tenue en température (vers 80°C).\n*   **Inconvénients** : Abrasif (utilisez une buse acier trempé).\n\n*   **(A) PLA** : Pour le prototypage rapide et validation de forme. **(~20€/kg)**\n*   **(B) PETG-CF** (Recommandé) : Rigide, facile à imprimer, esthétique carbone. Suffisant pour 80% du robot. **(~30€/kg)**\n*   **(C) PA12-CF** (Nylon Carbone) : Performance ultime (Chaleur/Choc). Nécessite enceinte chauffée + séchage pro. Pour les pièces critiques uniquement (Hanches). **(~100€/kg)**\n\n### Comparatif Matériaux\n| Critère | PLA (Proto) | PETG-CF (Standard) | PA12-CF (Pro) |\n| :--- | :--- | :--- | :--- |\n| **Coût (Est.)** | 20€ / kg | **30€ / kg** | 100€ / kg |\n| **Rigidité** | Moyenne | Élevée | Très Élevée |\n| **Résistance Chaleur** | Faible (50°C) | Moyenne (75°C) | Haute (100°C+) |\n| **Facilité Impression** | Très Facile | Facile | Difficile (Warping) |\n| **Usage D-Bot** | Tests de forme | **Coques, Bras, Tête** | Gears, Hanches |\n\n### Paramètres de Slicer (OrcaSlicer / QidiSlicer)\n*   **Matériau** : Creality Hyper **PETG-CF** (Recommandé pour débuter).\n    *   *Alternative Pro* : **PA12-CF** (Nylon Carbone). Plus rigide et résistant à la chaleur, mais nécessite une enceinte chauffée et un séchage parfait. À réserver aux utilisateurs expérimentés.\n*   **Températures** :\n    *   **Buse** : 270°C\n    *   **Plateau** : 80°C\n    *   **Chambre (Active)** : 50°C\n*   **Vitesse** : 200-300 mm/s.\n*   **Hauteur de couche** : 0.20 mm (Standard) ou 0.16 mm (Précision engrenages).\n*   **Périmètres (Walls)** : **4 à 5 murs minimum**. C'est le plus important pour la solidité des filetages/inserts.\n*   **Remplissage (Infill)** :\n    *   **100% (Solid)** pour : Hanches, Épaules, Supports Moteurs.\n    *   **40% (Gyroid)** pour : Coques, avant-bras, tête.\n*   **Séchage** : Obligatoire avant impression (65°C / 6h).\n\n---\n\n## 3. Montage des Moteurs Robstride\n\n### Intégration Robstride 05 (RS-05) - Cou / Poignets\n*   **Ancrage** : Le couple de pointe (5.5 Nm) est élevé pour du plastique.\n    *   Utilisez des **vis M4 x 12mm Acier 12.9 (Noir)** pour fixer le corps moteur au châssis. L'Inox est trop \"mou\" pour ces zones de force pure si vous démontez souvent.\n*   **Longueur de vis** : Règle d'or = Épaisseur pièce plastique + (Profondeur trou moteur - 1mm).\n    *   *Ne forcez jamais* si la vis touche le fond du trou borgne du moteur ! Vous détruiriez le filetage interne du stator.\n\n### Roulements 608ZZ\n*   Utilisés pour les articulations passives.\n*   **Indépendance** : La bague intérieure et extérieure sont indépendantes. Vous pouvez fixer l'une au châssis et l'autre au membre mobile.\n*   **Fichier STEP** : Disponible dans le dossier `Discussions/ou recuperer le modele step...`.\n\n### Positionnement LiDAR Unitree L2\n*   **Emplacement** : Sommet de la tête (Top of Head).\n*   **Pourquoi ?** Champ de vision dégagé à 360° pour le SLAM.\n*   **Fixation** : 4 vis M3 traversantes vers des inserts dans la coque de tête.\n*   **Orientation** : Câble vers l'arrière pour ne pas gêner la caméra OAK-D Pro (placée en frontal).\n", "Conception: 04_Electronique_Cablage": "# Électronique & Câblage\n\n## 1. Schéma Global de Connexion\nL'architecture repose sur un bus CAN centralisé et des liaisons USB High-Speed.\n\n### Cerveau Principal (NVIDIA Jetson Orin Nano)\n*   **Alimentation** : 19V DC (via Jack ou XT60 régulé).\n*   **Rôle** : Orchestrateur ROS2, Vision IA, Planification de mouvement.\n*   **Ports** :\n    *   **USB A** -> **InnoMaker USB2CAN** (Contrôle Moteurs)\n    *   **USB C** -> **OAK-D Pro** (Vision Stéréo + IA)\n    *   **USB A** -> **Sony Spresense** (Audio / Capteurs TR)\n\n---\n\n## 2. Bus CAN (Moteurs Robstride)\nC'est la colonne vertébrale du robot. Une erreur ici rend le robot inerte.\n\n### Adaptateur : InnoMaker USB2CAN-C\n*   **Firmware** : `gs_usb` (Natif Linux).\n*   **Configuration Switch** : Mettre le switch **120 \\Omega** sur **ON** (si l'adaptateur est en début de chaîne).\n*   **Câblage Bornier** :\n    *   **CAN_H** -> Fil Vert (souvent) du moteur.\n    *   **CAN_L** -> Fil Jaune (souvent) du moteur.\n    *   **GND** -> **CRITIQUE**. Relier la masse de l'USB2CAN à la masse commune des moteurs (Batterie -). Sans ça, le signal flotte et crée des erreurs \"Bus Off\".\n\n### Bus de Communication (CAN 1 Mbps)\nLe Bus CAN est le système nerveux du D-Bot. Une erreur de câblage ici rend le robot incontrôlable.\n\n#### Règle d'or du Câblage 3 fils\nBien que différentiel, le CAN exige une référence commune :\n1.  **CAN_H** (Jaune)\n2.  **CAN_L** (Blanc)\n3.  **GND** (Noir) : **CRITIQUE.** Doit relier la borne GND de l'InnoMaker à la masse des moteurs.\n*Note : Le fil rouge (VCC 5V) du Hub Holybro ne doit JAMAIS être connecté aux moteurs alimentés en 48V.*\n\n#### Architecture Daisy Chain\n- **Stubs** : Les dérivations vers les moteurs doivent mesurer moins de **30 cm**.\n- **Terminaison** : Une résistance de **120 Ω** doit être placée à chaque extrémité (Jetson et dernier moteur).\n- **Torsion** : Torsader les fils (33 tours/mètre) pour annuler les EMI.\n\n___\n\n## 3. Sony Spresense & OAK-D Pro\n\n### OAK-D Pro (Vision)\n*   Agit comme un capteur USB3.\n*   Intègre une **IMU (BNO085/BMI270)**.\n*   Le flux vidéo et les données IMU remontent à la Jetson via USB.\n*   *Note* : L'IMU embarquée est suffisante pour la stabilisation de base (équivalent Option A).\n\n### Sony Spresense (Audio & I/O)\n*   **Carte Extension Choisie** : **Standard Board** (CXD5602PWBEXT1).\n    *   *Raison* : Permet de brancher jusqu'à **8 microphones numériques** pour le Beamforming (localisation de la voix).\n    *   *Évolutabilité* : Headers Arduino compatibles pour ajouter des shields futurs.\n*   **Alternative LTE** : Si le robot doit sortir en extérieur (hors Wi-Fi), une **LTE Extension Board** aurait été préférée, mais la Standard offre plus de flexibilité I/O audio pour un robot social.\n*   **Liaison Jetson** : Via USB (Port principal micro-USB de la Spresense). La Spresense apparaît comme un périphérique série (`/dev/ttyUSBx`) ou Audio USB selon le sketch chargé.\n\n---\n\n### Mise sous tension (Sécurité Wanptek)\nPour les premiers tests moteurs (Banc d'essai) :\n1.  Régler la tension à **24.0V** (ou 48V) à vide.\n2.  Régler la limite de courant à **1.000A** (en court-circuitant les pinces).\n3.  Activer le mode **OCP** (Overcurrent Protection).\n4.  Séquence : Allumer l'alim -> Vérifier tension -> Brancher XT60 -> `Enable` logiciel.\n\n## 4. Alimentation (Power Distribution)\n*   **Batterie** : LiPo 6S ou alimentation stabilisée 24V (selon moteurs).\n*   **Connecteurs** :\n    *   **XT60 (Jaune)** : Pour la ligne principale de puissance. Indestructible.\n    *   **Distribution** : Utiliser un **PDB (Power Distribution Board)** de drone pour éclater le 24V vers chaque moteur.\n*   **Sécurité** :\n    *   Fusible automobile sur la ligne principale.\n    *   Bouton d'arrêt d'urgence (E-Stop) coupant l'alim moteurs mais *pas* la Jetson.\n", "Conception: 05_Logiciel_Configuration": "# Logiciel & Configuration\n\n## 1. NVIDIA Jetson (SocketCAN)\nLa configuration du bus CAN est essentielle pour piloter les moteurs Robstride.\n\n### Prérequis Linux\n```bash\nsudo apt-get update\nsudo apt-get install can-utils\n```\n\n### Couche Jetson (Middleware)\nLe D-Bot tourne sous **Ubuntu 22.04 (JetPack 6)** avec **ROS 2 Humble**.\n- **Micro-ROS Agent** : Gère la passerelle avec la Sony Spresense via `/dev/ttyTHS0` (Pins 8/10).\n- **NVIDIA Isaac ROS** : Accélération matérielle pour la vision (OAK-D).\n\n### Couche Spresense (Temps Réel)\nLa Spresense exécute un firmware Arduino/NuttX avec **Micro-ROS Client**.\n- **Topics publiés** :\n    - `/audio/direction` : Angle DoA calculé par beamforming.\n    - `/imu/data` : Données fusionnées (IMU Tête + SensiEDGE).\n    - `/power/status` : Tension batterie 12S et température interne (CommonSense).\n- **Fonction Watchdog** : Le firmware surveille le heartbeat de la Jetson et coupe le MOSFET de puissance en cas de freeze.\n- **Liaison Audio** : Flux 8 canaux via **UAC 2.0** (USB) pour une qualité Hi-Res (192 kHz).\n\n### Activation de l'Interface CAN\nL'adaptateur InnoMaker est reconnu comme `can0` (parfois `can1`).\nLe débit standard Robstride est **1 Mbps** (1,000,000 bps).\n\n**Commande d'activation :**\n```bash\nsudo ip link set can0 up type can bitrate 1000000\n```\n\n**Commande de diagnostic (candump) :**\n```bash\ncandump can0\n```\n*Si vous voyez des lignes défiler (ex: `can0 141 [8] ...`), la communication est établie.*\n\n### Dépannage\n*   **Erreur \"Bus-off\"** : Souvent un problème physique (Fils non torsadés, Terminaison 120 Ohm manquante, GND non relié).\n*   **Interface introuvable** : Vérifiez `lsusb` (ID 1d50:606f) et chargez le module si besoin : `sudo modprobe gs_usb`.\n\n---\n\n## 2. Architecture ROS2\nL'objectif est d'avoir un système réactif où la vision influence directement les moteurs.\n\n### Noeuds ROS2 Suggérés\n1.  **kbot_vision** : Wrapper pour l'OAK-D Pro. Publie les objets détectés (`/detections`) et l'odométrie visuelle (`/odom`).\n2.  **kbot_motor_control** : Lit `/cmd_vel` ou `/joint_states` et envoie les trames CAN brutes aux moteurs.\n3.  **kbot_audio** : Interface avec la Spresense. Reçoit la direction du son (x,y,z) et publie une cible pour la tête (`/head_target`).\n\n### Idées Algorithmiques\n*   **Beamforming (Audio)** : Utiliser les micros de la Spresense pour orienter la tête vers celui qui parle.\n*   **Stabilisation (IMU)** : Lire l'IMU de l'OAK-D (Torse/Tête) pour compenser les mouvements (Self-balancing) via les moteurs de hanche.\n\n---\n\n## 3. Outils de Développement\n*   **Fusion 360** : CAO Mécano-Soudée.\n*   **Docker** : Recommandé sur la Jetson pour isoler l'environnement ROS2 Humble/Jazzy.\n", "Conception: 06_Decisions_Architecturales": "# Décisions Architecturales\n\nCe document recense les choix techniques structurants effectués durant la phase de conception (Discussions Février 2026).\n\n## 1. Choix du Kit Moteur\n**Décision** : Ajouter 2 moteurs **Robstride 05 (RS05)** au kit standard.\n*   **Pourquoi ?** Le kit de base manquait de couple au niveau du cou et des poignets pour un humanoïde de cette taille.\n*   **Conséquence** : Nécessite des vis spécifiques (M4 Acier 12.9) et un ancrage châssis renforcé (PETG-CF 100% Infill).\n\n## 2. Carte d'Extension Sony Spresense\n**Choix** : **Extension Board Standard** (vs LTE Extension Board).\n*   **Motif Principal** : Capacités Audio et Évolutivité.\n    *   La carte Standard permet de connecter jusqu'à **8 microphones numériques** (essentiel pour le *beamforming* et l'interaction vocale avancée).\n    *   Elle possède des connecteurs Arduino compatibles, permettant d'ajouter un shield LTE tiers plus tard si nécessaire.\n    *   La carte LTE officielle sacrifie trop d'I/O audios (max 4 micros) pour un usage \"autonome outdoor\" qui n'est pas la priorité immédiate.\n\n## 3. Positionnement LiDAR (Unitree L2)\n**Choix** : **Sommet de la Tête**.\n*   **Alternatives rejetées** : Torse (occulté par les bras lors de la manipulation), Tibia (trop bas, ne voit pas les tables).\n*   **Avantage** : Champ de vision dégagé à 360° pour le SLAM (Simultaneous Localization and Mapping).\n*   **Contrainte** : Nécessite un câble passant dans le cou (attention à la torsion).\n\n## 4. Matériaux et Fixations\n*   **Visserie** : Standardisation sur **DIN 912** (Cylindrique) Inox A2.\n*   **Inserts** : Laiton (type Ruthex) préférés à l'Inox.\n    *   *Raison* : L'Inox conduit mal la chaleur, rendant la pose dans le plastique très risquée (fonte excessive autour de l'insert). La longueur de l'insert prime sur sa matière.\n", "Conception: 14_Cinematique_Moteurs": "# 14 - Cinématique & Choix Moteurs\n\nCe document détaille l'architecture cinématique du D-Bot (Target 24 DOF) et les spécifications techniques des actionneurs **RobStride**.\n\n## 1. Architecture Cinématique (Cible)\nL'architecture du D-Bot est une évolution du K-Bot standard (20 DOF + 2 Tête), portant le total à **24 Degrés de Liberté** pour une manipulation plus fine.\n\n### Répartition des Moteurs\n| Zone | Articulation | DOF | Moteur Recommandé | Rôle |\n| :--- | :--- | :--- | :--- | :--- |\n| **Tête** | Cou (Pan / Tilt) | 2 | **2x RS-05** | Orientation du regard (LiDAR + Caméras). |\n| **Bras (x2)** | Épaule (Pitch, Roll) | 2 | **2x RS-03** | Force brute pour lever le bras. |\n| | Biceps (Yaw) | 1 | **1x RS-02** | Rotation du bras. |\n| | Coude (Pitch) | 1 | **1x RS-02** | Flexion. |\n| | Avant-bras (Roll) | 1 | **1x RS-02** | Pronation/Supination. |\n| | Poignet (Pitch/Yaw) | 1 | **1x RS-00** | Orientation fine de la main. |\n| **Jambes (x2)** | Hanche (Roll, Yaw, Pitch) | 3 | **3x RS-04** | Portance principale et équilibre. |\n| | Genou (Pitch) | 1 | **1x RS-04** | Flexion (Couple max requis). |\n| | Cheville (Pitch/Roll) | 1 | **1x RS-04** | Propulsion et adaptation au sol. |\n\n*Note : La configuration standard \"K-Bot\" n'a que 5 moteurs par bras (pas de RS-00) et 5 par jambe, soit 20 moteurs au total. Le D-Bot ajoute le Cou (+2) et le Poignet (+2), soit 24 moteurs.*\n\n## 2. Spécifications Moteurs RobStride (Gamme Complète)\nVoici les données techniques consolidées pour l'ensemble de la gamme RobStride (Février 2025).  \n*Prix officiels RobStride ou sources vérifiées (OpenELAB, AiFitLab) - Hors taxes/livraison.*\n\n| Modèle | Couple Pic (N.m) | Couple Nominal (N.m) | Vitesse Max (RPM) | Poids (g) | Dimensions (mm) | Ratio | Prix ($) | Voltage | Usage D-Bot |\n| :--- | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :--- |\n| **RS-05** | **5.5** | 1.6 | 480 | **191** | 46×46×44 | 7.75:1 | **$120** | 48V (15-60V) | **Cou**, Doigts (futur) |\n| **RS-00** | **14.0** | 5.0 | 315 | **310** | 57×57×51 | 10:1 | **$135** | 48V (24-60V) | **Poignet** (Compact, fort couple) |\n| **RS-01** | **17.0** | 6.0 | 350 | **380** | 78.5×78.5×40 | 7.75:1 | **$140** | 36V (24-48V) | Alternative RS-02 (36V) |\n| **RS-02** | **17.0** | 6.0 | 410 | **405** | 78.5×78.5×45.5 | 7.75:1 | **$160** | 48V (24-60V) | **Coude**, Biceps, Poignet |\n| **RS-06** | **36.0** | 11.0 | 480 | **621** | 88×88×49 | 9:1 | **$230** | 48V (15-60V) | Entre-deux (Épaule légère) |\n| **RS-03** | **60.0** | 20.0 | 195 | **880** | 106×106×56 | 9:1 | **$250** | 48V (15-60V) | **Épaule** (Force brute) |\n| **RS-04** | **120.0** | 40.0 | 200 | **1420** | 120×120×56 | 9:1 | **$280** | 48V (15-60V) | **Hanche**, Genou, Cheville |\n\n### Analyse Comparative\n\n####  RS-05 vs RS-00 (Petits Moteurs)\n*   **RS-05** : Ultraléger (191g), idéal pour le cou où chaque gramme compte. Couple modeste (5.5 N.m) mais suffisant pour orientation.\n*   **RS-00** : Plus dense (310g, +62%) mais délivre **2,5× plus de couple** (14 N.m). Parfait pour un poignet devant porter des charges sans fléchir.\n\n#### RS-01 vs RS-02 (Moteurs Moyens)\n*   **Même couple** (17 N.m pic), mais **RS-01** optimisé pour **36V** (idéal pour batteries LiPo 8S), plus compact en profondeur (40mm vs 45.5mm).\n*   **RS-02** : Conçu pour **48V**, marginalement plus lourd (+25g). Standard pour D-Bot aux coudes/biceps.\n\n#### RS-06 (Intermédiaire Nouveau)\n*   **Niche** : Entre RS-02 (17 N.m) et RS-03 (60 N.m). Avec **36 N.m** et 621g, c'est un compromis pour des articulations nécessitant plus que du RS-02 sans le poids du RS-03.\n*   **Usage potentiel** : Épaule de petits robots, torse rotation, ou remplacer un RS-03 si l'on veut économiser 260g et 20$.\n\n#### RS-03 vs RS-04 (Gros Moteurs)\n*   **Saut de performance brutal** : RS-03 → 60 N.m (880g) ; RS-04 → **120 N.m** (1420g, +61% poids).\n*   **RS-03** : Minimum vital pour l'épaule D-Bot (couple nécessaire pour contrer le bras-de-levier).\n*   **RS-04** : Incontournable pour hanches/jambes. **Attention** : Peut briser des pièces PLA/PETG standard → Utiliser **PETG-CF (100% remplissage)** ou **Alu 6061 CNC**.\n\n### Choix pour le D-Bot (Rappel Répartition)\n| Zone | Moteur | Quantité | Couple Requis | Justification |\n| :--- | :---: | :---: | :---: | :--- |\n| Cou (Pan/Tilt) | RS-05 | 2 | 5.5 N.m | Légèreté critique (tête lourde avec LiDAR/caméras) |\n| Poignet | RS-00 | 2 | 14 N.m | Compact, fort couple pour manipulation fine |\n| Coude/Biceps/Avant-bras | RS-02 | 6 (3 par bras) | 17 N.m | Standard polyvalent 48V |\n| Épaule | RS-03 | 2 | 60 N.m | Force indispensable pour porte-à-faux max |\n| Jambes (Hanche/Genou/Cheville) | RS-04 | 10 (5 par jambe) | 120 N.m | Portance totale (~15 kg robot) |\n\n**Total moteurs D-Bot** : 2 + 2 + 6 + 2 + 10 = **22 moteurs** (peut évoluer à 24 avec ajout doigts/torse).\n\n## 3. Communication & Alimentation\nTous les moteurs partagent le même protocole :\n*   **Bus** : CAN 2.0B @ 1 Mbps.\n*   **Alimentation** : 48V DC Nominal (Supportent 24V mais avec couple/vitesse réduits). RS-01 optimisé pour 36V.\n*   **Câblage** : Daisy-chain (Chaîne) via connecteurs JST-GH 1.25mm (Data) et XT60 (Power).\n*   **Encodeurs** : Dual 14-bit magnetic encoders (haute précision + redondance).\n*   **Protection** : IP52 standard (IP67 en option sur certains modèles).\n\n> [!WARNING]\n> **Attention au RS-04** : Avec 120 N.m de couple, ce moteur peut briser des pièces imprimées en PLA ou PETG standard en cas de collision. Utilisez impérativement du **PETG-CF** (Remplissage 100%) ou des pièces CNC Alu 6061 pour les brackets de hanches.\n\n> [!NOTE]\n> **Prix et Disponibilité** : Les prix sont issus des sources officielles RobStride et distributeurs agréés (OpenELAB, AiFitLab) en Février 2025. Vérifiez la disponibilité avant commande - certains modèles peuvent avoir des délais variables.\n", "Perception: 07_Vision_IA": "# 07 - Vision et Intelligence Artificielle\n\n## 1. Capteur Principal : Luxonis OAK-D Pro (FF)\nLe choix s'est porté sur la version **Fixed Focus (FF)** pour garantir la stabilité de l'IA malgré les vibrations mécaniques des moteurs RobStride.\n\n### Intégration Mécanique\nPour un encastrement parfait dans le visage du robot :\n- **Dimensions du perçage** : **98 x 30 mm** (prévoir +0.5 mm de tolérance).\n- **Fixation** : 2x vis M3, entraxe de **75 mm**, centrées.\n- **Passage Câble** : Encoche de **18 mm** en bas pour le connecteur USB-C coudé.\n- **Orientation** : Inclinaison de **-10° à -15°** vers le sol recommandée pour détecter les obstacles proches.\n\n### Atouts Techniques (Audit)\n- **Stéréo Active** : Contrairement à la version Lite, la Pro dispose d'un projecteur IR permettant de voir la profondeur même sur des surfaces sans texture (murs blancs unis).\n- **Double IMU** : L'IMU interne de l'OAK-D est fusionnée avec celle de la Spresense pour stabiliser le regard (Gimbal V-SLAM).\n\n## 2. LiDAR : Unitree L2\nPlacé sur le haut du torse ou le bassin selon la configuration.\n- **Montage Inversé** : Recommandé pour minimiser l'angle mort au sol.\n- **Paramètres** : 64 000 points/s, FOV 360°x90°.\n\n## 3. Stack Logicielle (NVIDIA Isaac)\n- **Isaac ROS** : Utilise les moteurs de deep learning de la Jetson pour traiter le flux OAK-D en temps réel.\n- **Isaac Gym** : Utilisé pour l'apprentissage par renforcement de la marche (Deep RL), en important l'URDF mis à jour avec la masse de l'OAK-D (91g).\n", "Perception: 08_Audio_Perception": "# 08 - Audio et Perception Sensorielle\n\n## 1. Système Audio Sony Spresense\nL'architecture audio est conçue pour l'interaction sociale et la localisation spatiale des sons.\n\n### Configuration Microphones (Audit)\n- **Standard (8 micros)** : Utilisation de microphones **MEMS numériques (PDM)**.\n- **Placement stratégique** : \n    - 2x Oreilles\n    - 1x Torse (Face)\n    - 1x Nuque (Dos)\n    - + 4x Additionnels pour le beamforming 3D.\n- **Câblage** : Utiliser impérativement des **câbles blindés** pour éviter que les interférences des antennes (LTE/Wifi) ou des moteurs ne créent de \"buzz\" audio.\n\n### Isolation Acoustique\n- **Filtrage Mécanique** : Les microphones doivent être montés sur des supports en **TPU souple** pour isoler les capteurs des vibrations haute fréquence des moteurs RobStride.\n- **Synchronisation** : La Spresense garantit une capture synchronisée à **192 kHz**, indispensable pour le calcul du TDOA (Time Difference of Arrival).\n\n## 2. Fusion de Capteurs (IMU)\nLe D-bot gère une **Double IMU** pour une stabilité maximale :\n1.  **IMU Tête (Spresense)** : Référence pour la stabilisation du regard et le V-SLAM.\n2.  **IMU Torse (LiDAR/Jetson)** : Référence pour l'équilibre global et la compensation de la marche.\n- **Synergie** : Le décalage entre les deux IMU permet de détecter les flexions structurelles du châssis en temps réel.\n", "Fabrication: 09_Guide_Avance_Impression": "# Guide Avancé : Impression 3D Technique (PETG-CF & PA12-CF)\n\nCe guide compile les procédures critiques pour réussir vos impressions sur **Qidi Plus 4**, issues des retours techniques de Février 2026.\n\n## 1. Gestion de l'Humidité (Facteur #1 d'Échec)\nLe **PA12-CF** (Nylon) est extrêmement hygroscopique. Une exposition de 15 minutes à l'air libre suffit pour ruiner une impression.\n\n### Protocole de Séchage & Transfert\n1.  **Séchage Initial** :\n    *   **PETG-CF** : 65°C pendant 6-8h. (La Qidi Box suffit).\n    *   **PA12-CF** : 80°C - 90°C pendant 12h. (Four dédié recommandé si la Qidi Box plafonne).\n2.  **Le Transfert \"Flash\"** (PA12-CF uniquement) :\n    *   Ne laissez jamais la bobine refroidir dans le four (elle réabsorbe l'humidité).\n    *   Transférez-la dans la Qidi Box en **moins de 2 minutes**.\n3.  **Maintien en Qidi Box** :\n    *   Réglez la Box sur **60°C - 70°C** pendant toute l'impression.\n    *   **Règle absolue** : Le chemin de filament Box -> Extrudeur doit être 100% sous tube PTFE. Le moindre centimètre à l'air libre est un point de contamination.\n\n## 2. Calibration de Fiabilité (OrcaSlicer)\nPour du filament générique sur la Qidi Plus 4, la calibration manuelle est indispensable pour éviter les \"blobs\" et les clics d'extrudeur.\n\n### Calibration du Débit (Flow Rate)\n*   **Menu** : *Calibration > Flow Rate > Pass 1*.\n*   **Objectif** : Repérez la surface la plus lisse sans bourrelets.\n*   **Calcul** : $Flow_{New} = Flow_{Current} \\times (100 + Modificateur) / 100$.\n\n### Limite de Débit Volumétrique (Le verrou de sécurité)\nC'est le réglage le plus critique pour la Plus 4.\n*   **PLA Générique** : Limitez à **15 mm³/s**.\n*   **PETG Générique** : Limitez à **8 mm³/s** pour éviter l'accumulation sur la buse.\n*   **Action** : Réduisez la valeur par défaut de 20% pour garantir une fiabilité totale sur des impressions de longue durée.\n\n### Pressure Advance (Coins nets)\n*   **Valeurs typiques (Direct Drive)** : \n    *   PLA : **0.02 - 0.04**\n    *   PETG : **0.04 - 0.06**\n\n---\n\n## 3. Profils JSON Optimisés (Réglages \"Safe\")\nPlutôt que d'importer des fichiers JSON instables, modifiez ces valeurs dans vos profils @Qidi Plus4 :\n\n| Paramètre | PLA Fiable | PETG Anti-Échec |\n| :--- | :--- | :--- |\n| **Max Volumetric Speed** | 15 mm³/s | 8 mm³/s |\n| **Vitesse paroi ext.** | 60 mm/s | 60 mm/s |\n| **Z-hop** | Standard | **Spiral Z-hop** (évite les chocs) |\n| **Ventilateur Aux.** | 20% max | **OFF** (évite le warping) |\n\n---\n\n## 4. Post-Traitement : Recuit (Annealing) & Macros G-Code\nLe recuit stabilise les molécules et augmente la rigidité (+30%). Profitez de la chambre chauffée de la Qidi Plus 4.\n\n### Protocoles et Consignes\n| Matériau | Plateau / Chambre | Durée | Conseils |\n| :--- | :--- | :--- | :--- |\n| **eSUN PLA+** | 70°C / 60°C | 1h | Laisser les supports (Tree) pour éviter l'affaissement. |\n| **PETG-CF** | 85°C / 60°C | 3h | Stable dimensionnellement. |\n| **PA12-CF** | 100°C / 65°C | 8h | **Refroidissement lent** (2h porte fermée) obligatoire. |\n\n> [!CAUTION]\n> **Inserts Ruthex** : Ne faites JAMAIS de recuit sur des pièces équipées d'inserts. Le plastique ramollirait et les inserts se décentreraient. **Recuit d'abord, inserts après.**\n\n### Macros G-Code (Recuit Automatique de Fin d'Impression)\nPour une automatisation totale, insérez ces scripts dans votre \"End G-code\" dans OrcaSlicer. La pièce reste ainsi fixée au plateau, ce qui réduit drastiquement le retrait.\n\n#### 1. eSUN PLA+ (Cristallisation)\n```gcode\n; --- G-code de fin : Recuit Direct PLA+ ---\nM104 S0 ; Éteindre la buse\nM140 S70 ; Plateau à 70°C (Maintien base)\nM191 S60 ; Chambre à 60°C\nM117 Cristallisation PLA+ (1h)...\nG4 P3600000 ; Pause de 1 heure\nM140 S0 M191 S0\nM117 Terminé. Refroidissement porte fermée.\nM84\n```\n\n### Avantages du Recuit \"In-Situ\" (Audit)\nIl est fortement recommandé de lancer le recuit **immédiatement après l'impression** sans retirer la pièce du plateau :\n- **Absence d'humidité** : Le PA12-CF n'a pas le temps d'absorber l'humidité ambiante (ce qui ferait bouillir l'eau lors du recuit).\n- **Contrainte mécanique** : Le plateau agit comme un gabarit de maintien, empêchant le retrait (shrinkage) de la base de la pièce.\n- **Béquille Thermique** : Pour les pièces hautes et fines, laissez les **Tree Supports** (supports arborescents). Ils servent de béquille thermique pour éviter que la pièce ne penche lors de la phase de ramollissement à 70-80°C.\n\n#### 2. PETG-CF (Finition & Stress-Relief)\n```gcode\n; --- G-code de fin : Recuit Direct PETG-CF ---\nM104 S0 ; Éteindre buse\nM140 S85 ; Plateau à 85°C (Transition vitreuse)\nM191 S60 ; Chambre à 60°C\nM117 Recuit PETG-CF (3h)...\nG4 P10800000 ; Pause de 3 heures\nM140 S0 M191 S0\nM117 Finition. Refroidissement lent.\nM84\n```\n\n#### 3. PA12-CF (Performance Maximale)\n```gcode\n; --- G-code de fin : Recuit Direct PA12-CF ---\nM104 S0 ; Éteindre buse\nM140 S100 ; Plateau à 100°C (Radiateur)\nM191 S65 ; Chambre à 65°C\nM117 Recuit PA12-CF (8h)...\nG4 P28800000 ; Pause de 8 heures\nM140 S0 M191 S0\nM117 Refroidissement passif (2h)...\nM84\n```\n\n---\n\n## 5. Validation et Calibration Finale\n*   **Test du \"Son\" (PA12-CF)** : Une pièce bien recuite émet un son clair, presque métallique, lorsqu'on la tapote. Une pièce \"brute\" sonne plastique et mat.\n*   **Retrait PLA+** : Si vous constatez un retrait de 3% après recuit, appliquez un facteur d'échelle (Scale) de **103%** dans OrcaSlicer avant l'impression finale.\n*   **Maintenance Carbon** : Soufflez les poussières de carbone dans l'extrudeur tous les 2kg de filament pour éviter les glissements de roue dentée.\n", "Fabrication: 10_Guide_Buse_Tungstene": "# Guide Technique : Installation & Optimisation Buse Carbure de Tungstène\n\nCe document détaille l'installation de la buse haute performance en **Carbure de Tungstène**, recommandée pour les filaments chargés carbone (PETG-CF, PA12-CF) du projet D-Bot.\n\n## 1. Pourquoi cette Upgrade ?\n*   **Résistance Extrême** : Inusable face à l'abrasion du carbone (contrairement au laiton qui se creuse en quelques heures et à l'acier trempé qui s'use lentement).\n*   **Conductivité Thermique** : Proche du cuivre. Permet de chauffer aussi vite et stablement que le laiton, contrairement à l'acier trempé qui isole et demande de surchauffer (+10°C).\n*   **Fluidité** : Réduit drastiquement les risques de bouchage (clogs).\n\n## 2. Procédure de Remplacement (Critique)\nLe carbure de tungstène est ultra-dur mais **cassant** aux chocs. De plus, le bloc de chauffe est fragile.\n\n### Matériel Requis\n*   Clé plate fournie.\n*   **Pince multiprise** (Indispensable pour le contre-appui).\n*   Gants thermiques.\n\n### Étape 1 : Démontage Sécurisé\n1.  **Chauffe** : Montez la température à **250°C**. (À froid, le plastique colle et vous casserez le heatbreak).\n2.  **Videz l'extrudeur** (Unload).\n3.  **Contre-Appui (Règle d'Or)** : Maintenez **fermement** le bloc de chauffe carré avec la pince. Il ne doit **jamais** tourner sur lui-même pendant le dévissage.\n4.  Dévissez la buse d'origine.\n\n### Étape 2 : Montage et Serrage à Chaud\n1.  **Nettoyage** : Vérifiez que le filetage est propre.\n2.  **Vissage** : Vissez la buse Tungstène à la main (avec gant) pour sentir le filetage. Ne forcez pas si ça résiste.\n3.  **Serrage Final** : Toujours à **250°C** et avec la pince en contre-appui, serrez fermement (1.5 - 2.0 Nm).\n    *   *Contrôle Visuel* : Il doit rester un espace de **0.5mm à 1mm** entre la tête de la buse et le bloc. Si elle touche le bloc, elle ne scelle pas le heatbreak -> Fuite garantie.\n\n## 3. Calibration Machine (Obligatoire)\nLa thermique de la tête change radicalement. L'imprimante doit réapprendre.\n\n1.  **PID Calibration** : Menu Qidi > Configuration > PID Tuning. (Stabilisation thermique).\n2.  **Auto-Leveling** : La nouvelle buse peut être plus longue de quelques microns. Refaites le niveau.\n3.  **Z-Offset** : Vérifiez la première couche. Ajustez si nécessaire.\n\n## 4. Paramètres Slicer (QIDI Print / Orca)\nIl n'y a pas de case \"Tungstène\". Modifiez vos profils existants :\n\n| Paramètre | Ajustement vs Acier Trempé | Pourquoi ? |\n| :--- | :--- | :--- |\n| **Température** | **-5°C à -10°C** | Le tungstène conduit mieux la chaleur. |\n| **Flow Ratio (Débit)** | **-1% à -2%** | Ça glisse mieux ! Surveillez la sur-extrusion. |\n| **Volumetric Speed** | **+2 à +3 mm³/s** | Permet d'imprimer plus vite sans sous-extrusion. |\n\n**Exemple PA12-CF** : Passez de 300°C à **290°C**.\n\n## 5.## Maintenance et Sécurité Électrique (Audit Fév. 2026)\n\n### Maintenance Rapide\n- **Tête/Cou** : L'utilisation de borniers **WAGO 221-413 (3 entrées)** ou **415 (5 entrées)** est recommandée pour les liaisons LiDAR et moteurs de cou. Cela permet de remplacer un capteur en 30 secondes sans soudure.\n- **Sauvegarde** : Toujours créer un **clone de la carte SD** Jetson sur un SSD externe (ex: Hynix P310) avant chaque mise à jour majeure (`sudo dd if=/dev/sdX of=backup.img`).\n\n### Sécurité Alimentation Wanptek\nLe modèle DPS605U nécessite une procédure stricte car il ne possède pas de bouton \"Output ON/OFF\" physique :\n1.  Allumer l'alimentation à vide.\n2.  Vérifier la tension (**24.0V** ou **48.0V**).\n3.  Calculer la limite (ex: 1A). Court-circuiter les pinces pour régler le courant si besoin.\n4.  Activer le mode **OCP** (Overcurrent Protection) : l'alimentation coupera d'elle-même en cas d'appel de courant anormal (branchement inversé).\n5.  Brancher seulement ensuite le moteur RobStride.\n*   **Nettoyage** : Le plastique n'adhère pas au tungstène. Un coup de brosse laiton à chaud suffit.\n*   **Durée de vie** : Virtuellement infinie pour ce projet.\n\n> **Conseil D-Bot** : Installez-la **AVANT** de lancer la production massive des pièces critiques (Hanches RS-04, Fémurs) pour garantir une extrusion constante sur 40h+ d'impression.\n", "Fabrication: 12_Guide_Parties_Metal_CNC": "# Guide Préparation Fichiers CNC\n\nCe guide détaille la procédure pour commander les pièces structurelles en aluminium (Alu 6061) auprès de services d'usinage en ligne (JLCPCB, PCBWay, Xometry).\n\n## 1. Spécifications Techniques\n*   **Matériau** : **Aluminium 6061-T6** (Standard aérospatial, bon compromis résistance/poids).\n*   **Finition de surface** : **\"As Machined\"** (Brut d'usinage).\n    *   *Conseil* : Ne demandez pas de \"Bead Blasting\" (Microbillage) ou d'Anodisation pour les prototypes (Phase 2). Cela réduit le coût de 20% à 30%.\n*   **Tolérances** : Standard **ISO 2768-m** (+/- 0.1mm) suffisant pour le D-Bot.\n\n## 2. Préparation des Fichiers 3D\n*   **Format** : Exportez uniquement en **STEP (.stp / .step)**. Le STL n'est pas accepté pour l'usinage CNC.\n*   **Nettoyage CAO** :\n    *   Supprimez tous les textes gravés, logos ou décorations en relief. L'usinage de ces détails minuscules explose le temps machine et le prix.\n    *   Vérifiez les **rayons internes**. Un outil de fraiseuse est rond. Évitez les angles internes à 90° parfaits, mettez un rayon de 2mm ou 3mm là où c'est possible.\n\n## 3. Points de Contrôle D-Bot\n### Alésages (Trous précis)\n*   **Dowel Pins** : Les trous pour les goupilles de centrage (3mm et 4mm) doivent être précis (H7 si possible, sinon standard).\n*   **Interfaces Moteurs** : Les surfaces de contact avec les moteurs Robstride doivent être parfaitement planes pour dissiper la chaleur du moteur vers le châssis.\n\n## 4. Astuces de Commande\n*   **Regroupement** : Commandez toutes les pièces d'un coup (Bras Droit + Gauche).\n*   **Symétrie** : Vérifiez si vos pièces sont identiques (x2) ou symétriques (Miroir). En CNC, une pièce miroir est une référence différente.\n*   **Taraudage** : Indiquez clairement sur les plans 2D (PDF associés) quels trous doivent être taraudés (M3, M4). Sinon, ils seront livrés en trous lisses.\n", "Sécurité: 11_Guide_SensiEDGE_Watchdog": "# 11 - Guide SensiEDGE & Watchdog (Sécurité & Environnement)\n\nCe guide détaille l'intégration de la carte **SensiEDGE CommonSense** et la mise en place de l'architecture de **Sécurité Active** (Watchdog + Power Management) pilotée par la Sony Spresense.\n\n## 1. Matériel : SensiEDGE CommonSense\nCette carte \"Tout-en-un\" transforme la Spresense en une boîte noire environnementale et inertielle indépendante de la Jetson.\n\n### Spécifications Techniques\n*   **Connexion** : S'enfiche sur le port I2C/UART de la **Spresense Extension Board**.\n*   **Capteurs Critiques** :\n    *   **IMU 6-Axes (LSM6DSOX)** : Accéléromètre + Gyroscope. Sert de \"Sens de l'équilibre\" de secours pour détecter une chute quand la Jetson est éteinte.\n    *   **Magnétomètre (LIS2MDL)** : Boussole numérique.\n    *   **Environnement** : Température/Humidité (HTS221) et Pression (LPS22HH). Indispensable pour surveiller la température interne du torse (Moteurs + Jetson).\n    *   **Qualité d'Air (SGP40)** : Détection de VOC (Composés Organiques Volatils). Utile pour détecter une surchauffe de gaine ou un début d'incendie électrique.\n    *   **Lumière/Proximité** : Capteur de lumière ambiante.\n\n### Montage Mécanique\nL'empilement (Stack) se fait verticalement dans le torse :\n1.  **Base** : Spresense Extension Board (Arduino form factor).\n2.  **Milieu** : Spresense Main Board.\n3.  **Haut** : SensiEDGE CommonSense (se connecte sur les headers).\n\n---\n\n## 2. Architecture \"Power Manager\" (Veille & Réveil)\nLa Spresense est le seul composant \"Always-On\" du robot. Elle contrôle l'alimentation de puissance (44V) via un **MOSFET**.\n\n### Schéma de Câblage (Protection 12S)\n*   **Entrée Batterie** : 12S LiPo (44.4V Nominal / 50.4V Max).\n*   **Pont Diviseur (Surveillance Tension)** :\n    *   Connecté à la **Pin A0** de la Spresense.\n    *   **R1** (Côté Batterie) : **150 kΩ**\n    *   **R2** (Côté Masse) : **10 kΩ**\n    *   *Ratio* : 50V en entrée donne ~3.12V en lecture (Compatible 3.3V).\n*   **Commande Puissance (MOSFET)** :\n    *   Connecté à la **Pin D13**.\n    *   Composant recommandé : **Infineon BTS50085** (Smart High-Side Switch) ou Module MOSFET 100V opto-isolé.\n    *   Rôle : Coupe physiquement l'alimentation de la Jetson et des Moteurs RobStride.\n*   **Heartbeat (Watchdog)** :\n    *   Connecté à la **Pin D12**.\n    *   Signal : La Jetson envoie une impulsion \"Vivant\" toutes les 100ms.\n\n---\n\n## 3. Code Spresense (C++)\nVoici le code complet pour gérer la sécurité, la batterie et le réveil.\n\n### Gestionnaire d'Alimentation & Watchdog\nCe code surveille la batterie (protection décharge profonde) et la Jetson (anti-freeze).\n\n```cpp\n/*\n * D-Bot Power Manager & Watchdog\n * Matériel : Sony Spresense + SensiEDGE (IMU)\n */\n\n#include <RTC.h> // Pour la gestion du temps\n\nconst int PIN_MOSFET = 13;    // Commande du Relais/MOSFET Puissance\nconst int PIN_HEARTBEAT = 12; // Entrée signal vie Jetson\nconst int PIN_WAKEUP = 11;    // Bouton de Test (ou Trigger Vocal)\nconst int PIN_BATTERY = A0;   // Pont diviseur\n\n// Paramètres Batterie 12S (Sécurité)\nconst float R1 = 150000.0; \nconst float R2 = 10000.0;\nconst float VOLTAGE_THRESHOLD = 37.0; // Seuil critique (3.08V / cellule)\n\n// Paramètres Watchdog\nunsigned long lastHeartbeat = 0;\nconst unsigned long WATCHDOG_TIMEOUT = 5000; // 5 secondes sans signal = Crash\nbool isRobotAwake = false;\n\n// Lecture sécurisée de la tension batterie\nfloat readBatteryVoltage() {\n  int raw = analogRead(PIN_BATTERY);\n  // Conversion ADC (Ref 3.3V ou 5V selon jumper Extension Board)\n  float vOut = (raw * 5.0) / 1023.0; // Assumes 5V ref on Extension Board ADC\n  float vBat = vOut * ((R1 + R2) / R2);\n  return vBat;\n}\n\nvoid setup() {\n  pinMode(PIN_MOSFET, OUTPUT);\n  pinMode(PIN_HEARTBEAT, INPUT);\n  pinMode(PIN_WAKEUP, INPUT_PULLUP);\n  \n  digitalWrite(PIN_MOSFET, LOW); // Sécurité : Tout éteint au démarrage\n  Serial.begin(115200);\n  Serial.println(\"--- D-Bot Security Sentinel Started ---\");\n}\n\nvoid loop() {\n  // 1. Surveillance Batterie (Priorité Absolue)\n  float voltage = readBatteryVoltage();\n  if (voltage < VOLTAGE_THRESHOLD && voltage > 5.0) { // >5V pour éviter faux positif si pas branché\n    Serial.print(\"CRITIQUE : Batterie faible (\");\n    Serial.print(voltage);\n    Serial.println(\"V). Arrêt d'urgence.\");\n    emergencyShutdown();\n    return; // On ne fait rien d'autre\n  }\n\n  // 2. Gestion du Réveil (Si éteint)\n  if (!isRobotAwake) {\n    if (digitalRead(PIN_WAKEUP) == LOW) { // Ou détection vocale\n       if (voltage > VOLTAGE_THRESHOLD) {\n          wakeupRobot();\n       } else {\n          Serial.println(\"Refus d'allumage : Batterie trop faible.\");\n       }\n    }\n  }\n\n  // 3. Watchdog (Si allumé)\n  if (isRobotAwake) {\n    if (digitalRead(PIN_HEARTBEAT) == HIGH) {\n      lastHeartbeat = millis();\n    }\n    \n    if (millis() - lastHeartbeat > WATCHDOG_TIMEOUT) {\n      Serial.println(\"ALERTE : Perte signal Jetson (Freeze). Reboot...\");\n      emergencyShutdown();\n      // Optionnel : Tentative de redémarrage après 5s\n    }\n  }\n  \n  delay(100);\n}\n\nvoid wakeupRobot() {\n  Serial.println(\"Réveil du D-Bot...\");\n  digitalWrite(PIN_MOSFET, HIGH);\n  isRobotAwake = true;\n  lastHeartbeat = millis(); \n  delay(2000); // Laisser le temps à l'alim de se stabiliser\n}\n\nvoid emergencyShutdown() {\n  digitalWrite(PIN_MOSFET, LOW);\n  isRobotAwake = false;\n  Serial.println(\"Système mis en sécurité.\");\n}\n```\n\n### Intégration des Capteurs SensiEDGE\nPour lire les capteurs environnementaux (Air Quality, Temp), utilisez les bibliothèques Arduino standard compatibles :\n- **IMU** : `Arduino_LSM6DSOX`\n- **Temp/Hum** : `Arduino_HTS221`\n- **Pression** : `Arduino_LPS22HH`\n- **Gaz** : `Sensirion I2C SGP40`\n\n*Note : La carte CommonSense utilise le bus I2C standard. Aucune électronique additionnelle n'est requise.*\n", "Sécurité: 13_Securite_Electrique": "# Sécurité et Procédures de Mise en Marche\n\n> [!DANGER]\n> **RISQUE ÉLECTRIQUE ET MÉCANIQUE MAJEUR**\n> Les moteurs Robstride sont puissants et peuvent causer des blessures physiques ou brûler l'électronique s'ils sont mal utilisés.\n\n## 1. Configuration de l'Alimentation (Laboratoire)\nPour les premiers tests (Banc d'essai ou Bras seul), utilisez une alimentation de labo réglable (ex: Wanptek).\n\n### Paramètres \"Safe Start\"\n1.  **Tension (Voltage)** : **24.00V** (Vérifier au multimètre à vide avant de brancher quoi que ce soit).\n2.  **Courant (Current Limit)** : **1.000A** (1 Ampère).\n    *   *Méthode* : Faites un court-circuit des sondes (si l'alim le supporte) ou réglez via le menu OCP.\n3.  **Protection** : Activez le mode **OCP** (Over Current Protection). Si le moteur tire trop (blocage), l'alim coupe tout.\n\n## 2. Séquence d'Allumage (Power-Up Sequence)\nRespectez **toujours** cet ordre pour éviter de griller la carte de contrôle du moteur ou l'USB2CAN.\n\n1.  **ALLUMER** l'alimentation (Câble moteur DÉBRANCHÉ).\n2.  **VÉRIFIER** que la tension affiche bien 24V.\n3.  **BRANCHER** le connecteur XT60 du moteur (ou du robot).\n4.  **CONNECTER** l'USB (Data) à l'ordinateur/Jetson.\n5.  **LOGICIEL** : Lancer le script de contrôle ou le \"Enable\" moteur.\n\n> **INTERDIT** : Ne jamais modifier la tension (Voltage d'alim) alors que le moteur est branché et activé (Enabled). Les fluctuations peuvent détruire les MOSFETs internes.\n\n## 3. Arrêt d'Urgence (E-Stop)\n*   En phase de développement (Phase 2), ayez toujours la main sur l'interrupteur de l'alimentation.\n*   Si le robot fait un mouvement violent ou un bruit strident (\"singing\"), **COUPEZ L'ALIM DIRECTEMENT**. Ne cherchez pas à l'arrêter par logiciel.\n\n## 4. Sécurité Mécanique\n*   **Zone d'évolution** : Lors des tests de bras, assurez-vous que le rayon d'action est vide.\n*   **Pincement** : Ne pas mettre les doigts dans les articulations (Coude/Poignet) lorsque les moteurs sont sous tension, même à l'arrêt (Holding Torque actif).\n"};
        const navList = document.getElementById('nav-list');
        const view = document.getElementById('view');

        function renderDoc(key) {
            view.innerHTML = marked.parse(docs[key]);
            window.scrollTo(0, 0);
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.toggle('active', el.dataset.key === key);
            });
            history.replaceState(null, null, '#' + encodeURIComponent(key));
        }

        let currentGroup = "";
        Object.keys(docs).forEach(label => {
            const [group, name] = label.split(': ');
            if (group !== currentGroup) {
                const groupEl = document.createElement('div');
                groupEl.className = 'nav-group';
                groupEl.innerText = group;
                navList.appendChild(groupEl);
                currentGroup = group;
            }
            const item = document.createElement('a');
            item.className = 'nav-item';
            item.innerText = name.replace(/_/g, ' ');
            item.dataset.key = label;
            item.onclick = () => renderDoc(label);
            navList.appendChild(item);
        });

        // Load initial doc from hash or default to index
        const hash = decodeURIComponent(window.location.hash.substring(1));
        if (hash && docs[hash]) {
            renderDoc(hash);
        } else {
            renderDoc("Fondations: 00_Index");
        }

        // Intercept ALL internal links in markdown to work within the SPA
        view.addEventListener('click', (e) => {
            const link = e.target.closest('a');
            if (!link) return;
            
            const href = link.getAttribute('href');
            if (!href) return;
            
            // Check if it's an internal link (relative path or .md file)
            if (href.startsWith('./') || href.endsWith('.md')) {
                e.preventDefault();
                
                // Extract the filename without path and extension
                const filename = href.replace('./', '').replace('.md', '');
                
                // Find matching document key
                const match = Object.keys(docs).find(k => k.includes(filename));
                
                if (match) {
                    renderDoc(match);
                } else {
                    console.warn('Document not found:', filename);
                }
            }
        });
    </script>
</body>
</html>